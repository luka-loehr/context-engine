# context-engine AGENTS.md

Interactive AI-powered CLI tool that enables natural language conversations with codebases using XAI's Grok models. Provides context-aware answers, code analysis, and project insights directly in the terminal.

## Project Overview

context-engine is a terminal-based AI assistant designed for developers to interact with their codebases using natural language. It automatically scans project files, loads relevant context, and leverages XAI Grok models to deliver intelligent responses, code explanations, and debugging assistance. The tool supports multiple models for quick queries or deep analysis, with secure API key management and beautiful terminal formatting.

## Setup commands

### Installation
- Global installation (recommended for CLI usage): `npm install -g @lukaloehr/context-engine`
- Local development: `git clone https://github.com/luka-loehr/context-engine.git && cd context-engine && npm install`

### Environment Setup
- Set XAI API key: `export XAI_API_KEY="your_xai_api_key"` or create a `.env` file with `XAI_API_KEY=your_xai_api_key`
- For development linking: `npm link` to test the `context` command locally

### Starting the Application
- Run the CLI: `context` (from project root or any directory)
- The tool auto-loads the current working directory's codebase and starts an interactive chat session

### Post-Installation
- A postinstall script warns if not installed globally and guides setup
- No additional servers; it's a lightweight Node.js CLI

## Code style

- **Language and Module System**: Modern ES modules (`"type": "module"`) with Node.js >=16.0.0
- **Naming Conventions**: CamelCase for variables/functions, PascalCase for classes, kebab-case for files/directories
- **Import/Export Patterns**: Named exports preferred (e.g., `export { startApp } from './core/index.js'`); absolute imports relative to src/ where possible
- **Code Organization Principles**: Modular structure with directories for concerns (e.g., `src/commands/`, `src/providers/`, `src/utils/`); single-responsibility files; clear separation of CLI entry, core logic, and utilities
- **Linting and Formatting**: No explicit linter in package.json; follow consistent indentation (2 spaces), JSDoc comments for functions, and clean async/await patterns. Use ES6+ features like destructuring and template literals

## Dev environment tips

- **Common Development Commands**:
  - Link for local testing: `npm link`
  - Run directly: `node bin/context.js`
  - Check updates: The tool includes an update notifier via `update-notifier`
- **Build and Deployment**: No build step required; publish via `npm publish` for releases. Global installs handle distribution
- **Environment Setup Requirements**: Node.js >=16; XAI_API_KEY for testing API integrations. Use `.env` for local dev
- **Troubleshooting Tips**:
  - If `context` command not found, ensure global install or use `npx @lukaloehr/context-engine`
  - API key issues: Use `/api` command in chat or check keychain storage via `conf` package
  - Global vs local: Postinstall script detects and warns about non-global installs
- **Performance Considerations**: Lightweight startup; scans files efficiently but large codebases may increase load time. Tokenization via `gpt-tokenizer` helps manage context size

## Testing instructions

- **Test Commands**: Basic placeholder in package.json: `npm test` (currently echoes error; implement proper tests)
- **Test Structure and Organization**: No dedicated tests folder yet; add unit tests for utils (e.g., file scanning, tokenization) and integration tests for API providers
- **CI/CD Setup**: Not configured; recommend GitHub Actions for linting, testing, and npm publish on tags
- **Testing Frameworks Used**: None specified; suggest Jest or Node's built-in test runner for future implementation
- **Coverage Requirements**: Aim for >80% coverage on core functions like context loading and model switching once tests are added

## PR instructions

- **Pull Request Process**: Fork the repo, create feature branch (`feat/your-feature`), commit with clear messages (e.g., "feat: add test suite"), and open PR against `main`
- **Code Review Requirements**: Ensure code follows ES module patterns, includes JSDoc, and doesn't break CLI functionality. Test globally with `npm link` before submitting
- **Versioning Strategy**: Semantic versioning (SemVer) via package.json; bump minor for features, patch for fixes, major for breaking changes
- **Release Process**: Update version in package.json, tag release (`git tag vX.Y.Z`), push tags, and run `npm publish --access public`
- **Documentation Requirements**: Update README.md for new features; add examples in usage section. Ensure changes are reflected in project structure comments

---

*Generated by [context-engine](https://github.com/luka-loehr/context-engine)*